###
## Register - Crear usuario
POST http://localhost:8090/api/v1/auth/register HTTP/1.1
Content-Type: application/json

{
	"nombre": "Admin User",
	"email": "admin@test.com",
	"username": "admin",
	"password": "password123"
}

###
## Login - Obtener token JWT
# @name login
POST http://localhost:8090/api/v1/auth/login HTTP/1.1
Content-Type: application/json

{
	"username": "admin",
	"password": "password123"
}

###
## getAllDirectores() mostrar lista de todos los directores
GET http://localhost:8090/api/v1/directores HTTP/1.1
Content-Type: application/json



###
## getPeliculasDirectores() obtindrer directors per id
GET http://localhost:8090/api/v1/directores/20/info HTTP/1.1
Content-Type: application/json

###
## Crear director (POST)
POST http://localhost:8090/api/v1/directores HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{login.response.body.$.token}}

{
	"nombre": "Manolo",
	"nacionalidad": "Español"
}


###
## Actualizar director (PUT)
PUT http://localhost:8090/api/v1/directores/6 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{login.response.body.$.token}}

{
	"nombre": "Juan Antonio Bayona",
	"nacionalidad": "Espanya"
}
###
## getPeliculasDirectores() obtindrer directors per id
GET http://localhost:8090/api/v1/directores/1/info HTTP/1.1
Content-Type: application/json

###
## deleteDirector
DELETE http://localhost:8090/api/v1/directores/1 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{login.response.body.$.token}}

###
## getDirectores con filtro por nombre
GET http://localhost:8090/api/v1/directores?nombre=a&page=0&size=5&sort=nombre,asc HTTP/1.1
Content-Type: application/json



###################################
###
## getAllPeliculasNoPage
GET http://localhost:8090/api/v1/peliculas/all HTTP/1.1
Content-Type: application/json


###
## getAllPeliculas() mostrar lista de todas las peliculas (amb paginacio)
GET http://localhost:8090/api/v1/peliculas HTTP/1.1
Content-Type: application/json

###
## getPeliculasInfoById() obtindrer pelicula per id
GET http://localhost:8090/api/v1/peliculas/1/info HTTP/1.1
Content-Type: application/json
###
## getPeliculasInfoById() obtindrer pelicula per id
GET http://localhost:8090/api/v1/peliculas/52/info HTTP/1.1
Content-Type: application/json

###
## getPeliculaListOrderByTitulo
GET http://localhost:8090/api/v1/peliculas/orden/desc HTTP/1.1
Content-Type: application/json


###
## getPeliculasByDirector
GET http://localhost:8090/api/v1/peliculas/director/18 HTTP/1.1
Content-Type: application/json


###
## getPeliculasByYear
GET http://localhost:8090/api/v1/peliculas/year/2002 HTTP/1.1
Content-Type: application/json


###
## Crear pelicula (POST)
POST http://localhost:8090/api/v1/peliculas HTTP/1.1
Authorization: Bearer {{login.response.body.$.token}}
Content-Type: application/json

{
	"titulo": "Pelicula demo",
	"directorId": 5,
	"generoId": 1,
	"año": 2020,
	"duracion": 120,
	"sinopsis": "Historia sencilla para pruebas"
}

###
## Actualizar pelicula (PUT)
## Cambia el id si quieres editar otra pelicula
PUT http://localhost:8090/api/v1/peliculas/100 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{login.response.body.$.token}}

{
	"titulo": "Pelicula demo editada",
	"duracion": 125
}

###
## deletePelicula
## Cambia el id si quieres borrar otra pelicula
DELETE http://localhost:8090/api/v1/peliculas/41 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{login.response.body.$.token}}


###################################
###
## ERROR 404: director no existe
GET http://localhost:8090/api/v1/directores/99999/info HTTP/1.1
Content-Type: application/json

###
## ERROR 404: pelicula no existe
GET http://localhost:8090/api/v1/peliculas/99999/info HTTP/1.1
Content-Type: application/json

###
## ERROR 400: validacion body (crear director sin nombre)
POST http://localhost:8090/api/v1/directores HTTP/1.1
Authorization: Bearer {{login.response.body.$.token}}
Content-Type: application/json

{
	"nombre": "",
	"nacionalidad": "X"
}

###
## ERROR 400: validacion body (crear pelicula amb any invalid)
POST http://localhost:8090/api/v1/peliculas HTTP/1.1
Authorization: Bearer {{login.response.body.$.token}}
Content-Type: application/json

{
	"titulo": "",
	"directorId": 1,
	"generoId": 1,
	"año": 1500,
	"duracion": 0
}

###
## Crear genero (POST)
POST http://localhost:8090/api/v1/generos HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{login.response.body.$.token}}

{
	"nombre": "Accion",
	"descripcion": "Genero de pruebas"
}

###
## getAllGeneros (amb paginacio)
GET http://localhost:8090/api/v1/generos?page=0&size=5&sort=nombre,asc HTTP/1.1
Content-Type: application/json

###
## getGeneroById
GET http://localhost:8090/api/v1/generos/2 HTTP/1.1
Content-Type: application/json

###
## updateGenero
PUT http://localhost:8090/api/v1/generos/1 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{login.response.body.$.token}}

{
	"descripcion": "Descripcion actualizada"
}

###
## deleteGenero
DELETE http://localhost:8090/api/v1/generos/2 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{login.response.body.$.token}}

###
## ERROR 409: nombre de genero duplicado
POST http://localhost:8090/api/v1/generos HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{login.response.body.$.token}}

{
	"nombre": "Accion",
	"descripcion": "Debe fallar por unique"
}

###
## ERROR 404: genero no existe
GET http://localhost:8090/api/v1/generos/66666 HTTP/1.1
Content-Type: application/json

###
## ERROR 400: sort invalido en peliculas
GET http://localhost:8090/api/v1/peliculas?sort=campoInexistente,asc HTTP/1.1
Content-Type: application/json

###
## ERROR 400: page negativo
GET http://localhost:8090/api/v1/directores?page=-1 HTTP/1.1
Content-Type: application/json

###
## ERROR 400: size 0
GET http://localhost:8090/api/v1/peliculas?size=0 HTTP/1.1
Content-Type: application/json



###################################
###
## REGISTER (JWT)

POST http://localhost:8090/api/v1/auth/register HTTP/1.1
Content-Type: application/json

{
	"nombre": "Alumno Demo",
	"email": "alumno.demo@email.com",
	"username": "alumno",
	"password": "1234"
}

###
## LOGIN (JWT)

POST http://localhost:8090/api/v1/auth/login HTTP/1.1
Content-Type: application/json

{
	"username": "alumno",
	"password": "1234"
}

###
## Crear pelicula con token (protegido)
POST http://localhost:8090/api/v1/peliculas HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{login.response.body.$.token}}

{
	"titulo": "Pelicula con token",
	"directorId": 18,
	"generoId": 1,
	"año": 2021,
	"duracion": 110,
	"sinopsis": "Solo se crea si hay JWT"
}

###################################
###
## CONSULTES AGRUPADES - Estadistiques i agrupacions amb SQL (Part opcional)

###
## Estadistiques de directores (COUNT de pelicules per director)
GET http://localhost:8090/api/v1/directores/estadisticas HTTP/1.1
Content-Type: application/json

###
## Directors com a minim de pelicules (GROUP BY + HAVING)
## Filtra directors amb al menys 2 pelicules
GET http://localhost:8090/api/v1/directores/estadisticas/minimo?minPeliculas=4 HTTP/1.1
Content-Type: application/json

###
## Directors com a minim de películes
GET http://localhost:8090/api/v1/directores/estadisticas/minimo?minPeliculas=3 HTTP/1.1
Content-Type: application/json

###
## Películas agrupadas por año (COUNT + AVG por año)
GET http://localhost:8090/api/v1/peliculas/estadisticas/por-año HTTP/1.1
Content-Type: application/json

###
## Pelicules agrupades per genere (COUNT + AVG por genere)
GET http://localhost:8090/api/v1/peliculas/estadisticas/por-genero HTTP/1.1
Content-Type: application/json



